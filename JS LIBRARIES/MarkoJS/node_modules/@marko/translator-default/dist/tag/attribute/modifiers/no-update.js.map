{"version":3,"sources":["../../../../src/tag/attribute/modifiers/no-update.js"],"names":["hasMonkeyPatch","WeakSet","exit","tag","attr","node","hub","file","isVDOM","markoOpts","output","preserveAttrs","has","add","push","name"],"mappings":"gEAAA;;AAEA,MAAMA,cAAc,GAAG,IAAIC,OAAJ,EAAvB;;AAEA;AACA;AACA,G;AACe;AACbC,EAAAA,IAAI,CAACC,GAAD,EAAMC,IAAN,EAAY;AACd,UAAM;AACJC,MAAAA,IADI;AAEJC,MAAAA,GAAG,EAAE,EAAEC,IAAF,EAFD;AAGFJ,IAAAA,GAHJ;AAIA,UAAMK,MAAM,GAAGD,IAAI,CAACE,SAAL,CAAeC,MAAf,KAA0B,MAAzC;;AAEA,QAAI,CAACL,IAAI,CAACM,aAAV,EAAyB;AACvBN,MAAAA,IAAI,CAACM,aAAL,GAAqB,EAArB;;AAEA,UAAIH,MAAM,IAAI,CAACR,cAAc,CAACY,GAAf,CAAmBL,IAAnB,CAAf,EAAyC;AACvCP,QAAAA,cAAc,CAACa,GAAf,CAAmBN,IAAnB;AACA,uCAAcA,IAAd,EAAoB,uCAApB;AACD;AACF;;AAEDF,IAAAA,IAAI,CAACM,aAAL,CAAmBG,IAAnB,CAAwBV,IAAI,CAACC,IAAL,CAAUU,IAAlC;AACD,GAlBY,E","sourcesContent":["import { importDefault } from \"@marko/babel-utils\";\n\nconst hasMonkeyPatch = new WeakSet();\n\n/**\n * Does nothing in html mode.\n */\nexport default {\n  exit(tag, attr) {\n    const {\n      node,\n      hub: { file }\n    } = tag;\n    const isVDOM = file.markoOpts.output !== \"html\";\n\n    if (!node.preserveAttrs) {\n      node.preserveAttrs = [];\n\n      if (isVDOM && !hasMonkeyPatch.has(file)) {\n        hasMonkeyPatch.add(file);\n        importDefault(file, \"marko/src/runtime/vdom/preserve-attrs\");\n      }\n    }\n\n    node.preserveAttrs.push(attr.node.name);\n  }\n};\n"],"file":"no-update.js"}