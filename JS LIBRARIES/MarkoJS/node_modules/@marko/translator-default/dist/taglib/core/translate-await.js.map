{"version":3,"sources":["../../../src/taglib/core/translate-await.js"],"names":["enter","path","args","get","length","buildCodeFrameError","loc","start","node","end","hub","file","provider","pushContainer","t","markoAttribute","some","attr","stringLiteral","toString","set","undefined"],"mappings":"6DAAA;;AAEO,SAASA,KAAT,CAAeC,IAAf,EAAqB;AAC1B,QAAMC,IAAI,GAAGD,IAAI,CAACE,GAAL,CAAS,WAAT,CAAb;;AAEA,MAAI,CAACD,IAAI,CAACE,MAAV,EAAkB;AAChB,UAAMH,IAAI;AACPE,IAAAA,GADG,CACC,MADD;AAEHE,IAAAA,mBAFG;AAGF,uFAHE,CAAN;;AAKD,GAND,MAMO,IAAIH,IAAI,CAACE,MAAL,GAAc,CAAlB,EAAqB;AAC1B,UAAM;AACJE,MAAAA,GAAG,EAAE,EAAEC,KAAF,EADD;AAEFL,IAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQM,IAFZ;AAGA,UAAM;AACJF,MAAAA,GAAG,EAAE,EAAEG,GAAF,EADD;AAEFP,IAAAA,IAAI,CAACA,IAAI,CAACE,MAAL,GAAc,CAAf,CAAJ,CAAsBI,IAF1B;AAGA,UAAMP,IAAI,CAACS,GAAL,CAASC,IAAT,CAAcN,mBAAd;AACJ,MAAEC,GAAG,EAAE,EAAEC,KAAF,EAASE,GAAT,EAAP,EADI;AAEJ,0DAFI,CAAN;;AAID;;AAED,QAAM,CAACG,QAAD,IAAaV,IAAnB;AACAD,EAAAA,IAAI,CAACY,aAAL;AACE,cADF;AAEEC,kBAAEC,cAAF,CAAiB,WAAjB,EAA8BH,QAAQ,CAACJ,IAAvC,CAFF;;;AAKA,MAAI,CAACP,IAAI,CAACE,GAAL,CAAS,YAAT,EAAuBa,IAAvB,CAA4B,CAAAC,IAAI,KAAIA,IAAI,CAACd,GAAL,CAAS,MAAT,EAAiBK,IAAjB,KAA0B,MAA9D,CAAL,EAA4E;AAC1EP,IAAAA,IAAI,CAACY,aAAL;AACE,gBADF;AAEEC,oBAAEC,cAAF,CAAiB,OAAjB,EAA0BD,gBAAEI,aAAF,CAAgBN,QAAQ,CAACO,QAAT,EAAhB,CAA1B,CAFF;;AAID;;AAEDlB,EAAAA,IAAI,CAACmB,GAAL,CAAS,WAAT,EAAsBC,SAAtB;AACD","sourcesContent":["import { types as t } from \"@marko/compiler\";\n\nexport function enter(path) {\n  const args = path.get(\"arguments\");\n\n  if (!args.length) {\n    throw path\n      .get(\"name\")\n      .buildCodeFrameError(\n        'You must provide a promise argument to the \"<await>\" tag, eg: \"<await(promise)>\".'\n      );\n  } else if (args.length > 1) {\n    const {\n      loc: { start }\n    } = args[1].node;\n    const {\n      loc: { end }\n    } = args[args.length - 1].node;\n    throw path.hub.file.buildCodeFrameError(\n      { loc: { start, end } },\n      'You can only pass one argument to the \"<await>\" tag.'\n    );\n  }\n\n  const [provider] = args;\n  path.pushContainer(\n    \"attributes\",\n    t.markoAttribute(\"_provider\", provider.node)\n  );\n\n  if (!path.get(\"attributes\").some(attr => attr.get(\"name\").node === \"name\")) {\n    path.pushContainer(\n      \"attributes\",\n      t.markoAttribute(\"_name\", t.stringLiteral(provider.toString()))\n    );\n  }\n\n  path.set(\"arguments\", undefined);\n}\n"],"file":"translate-await.js"}