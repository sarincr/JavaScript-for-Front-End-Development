{"version":3,"sources":["../../../src/babel-plugin/util/parse-id-shorthand.js"],"names":["file","shorthand","attributes","idAttr","find","name","buildCodeFrameError","idParts","rawParts","map","part","expression","pos","t","stringLiteral","text","endPos","push","markoAttribute","length","reduce","a","b","binaryExpression"],"mappings":"gEAAA;AACA,8D;;AAEe,CAACA,IAAD,EAAOC,SAAP,EAAkBC,UAAlB,KAAiC;AAC9C,MAAI,CAACD,SAAL,EAAgB;AACd,WAAOC,UAAP;AACD;;AAED,QAAMC,MAAM,GAAGD,UAAU,CAACE,IAAX,CAAgB,CAAC,EAAEC,IAAF,EAAD,KAAcA,IAAI,KAAK,IAAvC,CAAf;AACA,MAAIF,MAAJ,EAAY;AACV,UAAMH,IAAI,CAACM,mBAAL;AACJH,IAAAA,MADI;AAEJ,gDAFI,CAAN;;AAID;;AAED,QAAMI,OAAO,GAAGN,SAAS,CAACO,QAAV,CAAmBC,GAAnB,CAAuB,CAAAC,IAAI;AACzCA,EAAAA,IAAI,CAACC,UAAL;AACI,mCAAgBX,IAAhB,EAAsBU,IAAI,CAACC,UAA3B,EAAuCD,IAAI,CAACE,GAA5C,CADJ;AAEI,2BAAQZ,IAAR,EAAca,CAAC,CAACC,aAAF,CAAgBJ,IAAI,CAACK,IAArB,CAAd,EAA0CL,IAAI,CAACE,GAA/C,EAAoDF,IAAI,CAACM,MAAzD,CAHU,CAAhB;;;AAMAd,EAAAA,UAAU,CAACe,IAAX;AACEJ,EAAAA,CAAC,CAACK,cAAF;AACE,MADF;AAEEX,EAAAA,OAAO,CAACY,MAAR,KAAmB,CAAnB;AACIZ,EAAAA,OAAO,CAAC,CAAD,CADX;AAEIA,EAAAA,OAAO,CAACa,MAAR,CAAe,CAACC,CAAD,EAAIC,CAAJ,KAAUT,CAAC,CAACU,gBAAF,CAAmB,GAAnB,EAAwBF,CAAxB,EAA2BC,CAA3B,CAAzB,CAJN,CADF;;;;AASA,SAAOpB,UAAP;AACD,C","sourcesContent":["import { withLoc, parseExpression } from \"@marko/babel-utils\";\nimport * as t from \"../../babel-types\";\n\nexport default (file, shorthand, attributes) => {\n  if (!shorthand) {\n    return attributes;\n  }\n\n  const idAttr = attributes.find(({ name }) => name === \"id\");\n  if (idAttr) {\n    throw file.buildCodeFrameError(\n      idAttr,\n      \"Cannot have shorthand id and id attribute.\"\n    );\n  }\n\n  const idParts = shorthand.rawParts.map(part =>\n    part.expression\n      ? parseExpression(file, part.expression, part.pos)\n      : withLoc(file, t.stringLiteral(part.text), part.pos, part.endPos)\n  );\n\n  attributes.push(\n    t.markoAttribute(\n      \"id\",\n      idParts.length === 1\n        ? idParts[0]\n        : idParts.reduce((a, b) => t.binaryExpression(\"+\", a, b))\n    )\n  );\n\n  return attributes;\n};\n"],"file":"parse-id-shorthand.js"}