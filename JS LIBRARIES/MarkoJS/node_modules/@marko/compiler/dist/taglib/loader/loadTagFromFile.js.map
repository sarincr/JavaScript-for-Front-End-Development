{"version":3,"sources":["../../../src/taglib/loader/loadTagFromFile.js"],"names":["jsonFileReader","require","types","cache","loaders","ok","loadTagFromFile","filePath","tag","get","Tag","put","tagProps","readFileSync","loadTagFromProps","module","exports"],"mappings":"aAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,oBAAD,CAA5B;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,SAAD,CAAnB;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,SAAD,CAAnB;AACA,IAAIG,OAAO,GAAGH,OAAO,CAAC,WAAD,CAArB;;AAEA,IAAII,EAAE,GAAGJ,OAAO,CAAC,QAAD,CAAP,CAAkBI,EAA3B;;AAEA,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACjCF,EAAAA,EAAE,CAACE,QAAD,EAAW,wBAAX,CAAF;;AAEA,MAAIC,GAAG,GAAGL,KAAK,CAACM,GAAN,CAAUF,QAAV,CAAV;;AAEA;AACA;AACA,MAAI,CAACC,GAAL,EAAU;AACRA,IAAAA,GAAG,GAAG,IAAIN,KAAK,CAACQ,GAAV,CAAcH,QAAd,CAAN;AACAJ,IAAAA,KAAK,CAACQ,GAAN,CAAUJ,QAAV,EAAoBC,GAApB;;AAEA,QAAII,QAAQ,GAAGZ,cAAc,CAACa,YAAf,CAA4BN,QAA5B,CAAf;AACAH,IAAAA,OAAO,CAACU,gBAAR,CAAyBN,GAAzB,EAA8BI,QAA9B;AACD;;AAED,SAAOJ,GAAP;AACD;;AAEDO,MAAM,CAACC,OAAP,GAAiBV,eAAjB","sourcesContent":["var jsonFileReader = require(\"./json-file-reader\");\nvar types = require(\"./types\");\nvar cache = require(\"./cache\");\nvar loaders = require(\"./loaders\");\n\nvar ok = require(\"assert\").ok;\n\nfunction loadTagFromFile(filePath) {\n  ok(filePath, '\"filePath\" is required');\n\n  var tag = cache.get(filePath);\n\n  // Only load a tag once by caching the loaded tags using the file\n  // system file path as the key\n  if (!tag) {\n    tag = new types.Tag(filePath);\n    cache.put(filePath, tag);\n\n    var tagProps = jsonFileReader.readFileSync(filePath);\n    loaders.loadTagFromProps(tag, tagProps);\n  }\n\n  return tag;\n}\n\nmodule.exports = loadTagFromFile;\n"],"file":"loadTagFromFile.js"}