{"version":3,"sources":["../../../src/taglib/loader/loadTaglibFromFile.js"],"names":["jsonFileReader","require","types","cache","loaders","ok","loadFromFile","filePath","taglib","get","Taglib","put","taglibProps","readFileSync","loadTaglibFromProps","module","exports"],"mappings":"aAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,oBAAD,CAA5B;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,SAAD,CAAnB;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,SAAD,CAAnB;AACA,IAAIG,OAAO,GAAGH,OAAO,CAAC,WAAD,CAArB;;AAEA,IAAII,EAAE,GAAGJ,OAAO,CAAC,QAAD,CAAP,CAAkBI,EAA3B;;AAEA,SAASC,YAAT,CAAsBC,QAAtB,EAAgC;AAC9BF,EAAAA,EAAE,CAACE,QAAD,EAAW,wBAAX,CAAF;;AAEA,MAAIC,MAAM,GAAGL,KAAK,CAACM,GAAN,CAAUF,QAAV,CAAb;;AAEA;AACA;AACA,MAAI,CAACC,MAAL,EAAa;AACXA,IAAAA,MAAM,GAAG,IAAIN,KAAK,CAACQ,MAAV,CAAiBH,QAAjB,CAAT;AACAJ,IAAAA,KAAK,CAACQ,GAAN,CAAUJ,QAAV,EAAoBC,MAApB;;AAEA,QAAII,WAAW,GAAGZ,cAAc,CAACa,YAAf,CAA4BN,QAA5B,CAAlB;AACAH,IAAAA,OAAO,CAACU,mBAAR,CAA4BN,MAA5B,EAAoCI,WAApC;AACD;;AAED,SAAOJ,MAAP;AACD;;AAEDO,MAAM,CAACC,OAAP,GAAiBV,YAAjB","sourcesContent":["var jsonFileReader = require(\"./json-file-reader\");\nvar types = require(\"./types\");\nvar cache = require(\"./cache\");\nvar loaders = require(\"./loaders\");\n\nvar ok = require(\"assert\").ok;\n\nfunction loadFromFile(filePath) {\n  ok(filePath, '\"filePath\" is required');\n\n  var taglib = cache.get(filePath);\n\n  // Only load a taglib once by caching the loaded taglibs using the file\n  // system file path as the key\n  if (!taglib) {\n    taglib = new types.Taglib(filePath);\n    cache.put(filePath, taglib);\n\n    var taglibProps = jsonFileReader.readFileSync(filePath);\n    loaders.loadTaglibFromProps(taglib, taglibProps);\n  }\n\n  return taglib;\n}\n\nmodule.exports = loadFromFile;\n"],"file":"loadTaglibFromFile.js"}