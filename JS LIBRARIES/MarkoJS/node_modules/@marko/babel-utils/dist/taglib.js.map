{"version":3,"sources":["../src/taglib.js"],"names":["SEEN_TAGS_KEY","Symbol","getTaglibLookup","file","___taglibLookup","getTagDefForTagName","tagName","tagDef","getTag","seen","metadata","marko","Set","has","add","filePath","len","length","endsWith","watchFiles","push"],"mappings":"mIAAA,MAAMA,aAAa,GAAGC,MAAM,EAA5B;;AAEO,SAASC,eAAT,CAAyBC,IAAzB,EAA+B;AACpC,SAAOA,IAAI,CAACC,eAAZ;AACD;;AAEM,SAASC,mBAAT,CAA6BF,IAA7B,EAAmCG,OAAnC,EAA4C;AACjD,QAAMC,MAAM,GAAGL,eAAe,CAACC,IAAD,CAAf,CAAsBK,MAAtB,CAA6BF,OAA7B,CAAf;;AAEA,MAAIC,MAAJ,EAAY;AACV,QAAIE,IAAI,GAAGN,IAAI,CAACO,QAAL,CAAcC,KAAd,CAAoBX,aAApB,CAAX;AACA,QAAI,CAACS,IAAL,EAAW;AACTA,MAAAA,IAAI,GAAGN,IAAI,CAACO,QAAL,CAAcC,KAAd,CAAoBX,aAApB,IAAqC,IAAIY,GAAJ,EAA5C;AACD;;AAED,QAAI,CAACH,IAAI,CAACI,GAAL,CAASN,MAAT,CAAL,EAAuB;AACrBE,MAAAA,IAAI,CAACK,GAAL,CAASR,OAAT;AACA,YAAM,EAAES,QAAF,KAAeR,MAArB;AACA,YAAMS,GAAG,GAAGD,QAAQ,CAACE,MAArB;;AAEA,UAAIF,QAAQ,CAACC,GAAG,GAAG,EAAP,CAAR,KAAuB,GAAvB,IAA8BD,QAAQ,CAACG,QAAT,CAAkB,gBAAlB,CAAlC,EAAuE;AACrEf,QAAAA,IAAI,CAACO,QAAL,CAAcC,KAAd,CAAoBQ,UAApB,CAA+BC,IAA/B,CAAoCL,QAApC;AACD;AACF;AACF;AACD,SAAOR,MAAP;AACD","sourcesContent":["const SEEN_TAGS_KEY = Symbol();\n\nexport function getTaglibLookup(file) {\n  return file.___taglibLookup;\n}\n\nexport function getTagDefForTagName(file, tagName) {\n  const tagDef = getTaglibLookup(file).getTag(tagName);\n\n  if (tagDef) {\n    let seen = file.metadata.marko[SEEN_TAGS_KEY];\n    if (!seen) {\n      seen = file.metadata.marko[SEEN_TAGS_KEY] = new Set();\n    }\n\n    if (!seen.has(tagDef)) {\n      seen.add(tagName);\n      const { filePath } = tagDef;\n      const len = filePath.length;\n\n      if (filePath[len - 14] === \"m\" && filePath.endsWith(\"marko-tag.json\")) {\n        file.metadata.marko.watchFiles.push(filePath);\n      }\n    }\n  }\n  return tagDef;\n}\n"],"file":"taglib.js"}