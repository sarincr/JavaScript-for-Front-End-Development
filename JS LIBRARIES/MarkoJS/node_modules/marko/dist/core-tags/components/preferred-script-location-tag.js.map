{"version":3,"sources":["../../../src/core-tags/components/preferred-script-location-tag.js"],"names":["forceScriptTagAtThisPoint","out","writer","global","htmlSoFar","toString","undefined","clear","write","module","exports","render","input","isSync","asyncOut","beginAsync","last","timeout","onLast","next","end"],"mappings":"AAAA;;AAEA,SAASA,yBAAT,CAAmCC,GAAnC,EAAwC;AACtC,QAAMC,MAAM,GAAGD,GAAG,CAACC,MAAnB;;AAEAD,EAAAA,GAAG,CAACE,MAAJ,MAA4B,IAA5B;AACA,QAAMC,SAAS,GAAGF,MAAM,CAACG,QAAP,EAAlB;AACAJ,EAAAA,GAAG,CAACE,MAAJ,MAA4BG,SAA5B;;AAEAJ,EAAAA,MAAM,CAACK,KAAP;AACAL,EAAAA,MAAM,CAACM,KAAP,CAAaJ,SAAb;AACD;;AAEDK,MAAM,CAACC,OAAP,GAAiB,SAASC,MAAT,CAAgBC,KAAhB,EAAuBX,GAAvB,EAA4B;AAC3C,MAAIA,GAAG,CAACY,MAAJ,OAAiB,IAArB,EAA2B;AACzBb,IAAAA,yBAAyB,CAACC,GAAD,CAAzB;AACD,GAFD,MAEO;AACL,UAAMa,QAAQ,GAAGb,GAAG,CAACc,UAAJ,CAAe,EAAEC,IAAI,EAAE,IAAR,EAAcC,OAAO,EAAE,CAAC,CAAxB,EAAf,CAAjB;AACAhB,IAAAA,GAAG,CAACiB,MAAJ,CAAW,UAAUC,IAAV,EAAgB;AACzBnB,MAAAA,yBAAyB,CAACc,QAAD,CAAzB;AACAA,MAAAA,QAAQ,CAACM,GAAT;AACAD,MAAAA,IAAI;AACL,KAJD;AAKD;AACF,CAXD","sourcesContent":["\"use strict\";\n\nfunction forceScriptTagAtThisPoint(out) {\n  const writer = out.writer;\n\n  out.global.___isLastFlush = true;\n  const htmlSoFar = writer.toString();\n  out.global.___isLastFlush = undefined;\n\n  writer.clear();\n  writer.write(htmlSoFar);\n}\n\nmodule.exports = function render(input, out) {\n  if (out.isSync() === true) {\n    forceScriptTagAtThisPoint(out);\n  } else {\n    const asyncOut = out.beginAsync({ last: true, timeout: -1 });\n    out.onLast(function (next) {\n      forceScriptTagAtThisPoint(asyncOut);\n      asyncOut.end();\n      next();\n    });\n  }\n};\n"],"file":"preferred-script-location-tag.js"}