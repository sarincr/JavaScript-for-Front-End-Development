{"version":3,"sources":["../../src/runtime/dom-insert.js"],"names":["extend","require","componentsUtil","destroyComponentForNode","destroyNodeRecursive","helpers","insertBefore","insertAfter","removeChild","resolveEl","el","elId","document","getElementById","Error","beforeRemove","referenceEl","module","exports","target","getEl","afterInsert","appendTo","prependTo","firstChild","replace","parentNode","replaceChildrenOf","curChild","nextSibling","innerHTML"],"mappings":"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","sourcesContent":["var extend = require(\"raptor-util/extend\");\nvar componentsUtil = require(\"./components/util\");\nvar destroyComponentForNode = componentsUtil.___destroyComponentForNode;\nvar destroyNodeRecursive = componentsUtil.___destroyNodeRecursive;\nvar helpers = require(\"./vdom/morphdom/helpers\");\n\nvar insertBefore = helpers.___insertBefore;\nvar insertAfter = helpers.___insertAfter;\nvar removeChild = helpers.___removeChild;\n\nfunction resolveEl(el) {\n  if (typeof el == \"string\") {\n    var elId = el;\n    el = document.getElementById(elId);\n    if (!el) {\n      throw Error(\"Not found: \" + elId);\n    }\n  }\n  return el;\n}\n\nfunction beforeRemove(referenceEl) {\n  destroyNodeRecursive(referenceEl);\n  destroyComponentForNode(referenceEl);\n}\n\nmodule.exports = function (target, getEl, afterInsert) {\n  extend(target, {\n    appendTo: function (referenceEl) {\n      referenceEl = resolveEl(referenceEl);\n      var el = getEl(this, referenceEl);\n      insertBefore(el, null, referenceEl);\n      return afterInsert(this, referenceEl);\n    },\n    prependTo: function (referenceEl) {\n      referenceEl = resolveEl(referenceEl);\n      var el = getEl(this, referenceEl);\n      insertBefore(el, referenceEl.firstChild || null, referenceEl);\n      return afterInsert(this, referenceEl);\n    },\n    replace: function (referenceEl) {\n      referenceEl = resolveEl(referenceEl);\n      var el = getEl(this, referenceEl);\n      beforeRemove(referenceEl);\n      insertBefore(el, referenceEl, referenceEl.parentNode);\n      removeChild(referenceEl);\n      return afterInsert(this, referenceEl);\n    },\n    replaceChildrenOf: function (referenceEl) {\n      referenceEl = resolveEl(referenceEl);\n      var el = getEl(this, referenceEl);\n\n      var curChild = referenceEl.firstChild;\n      while (curChild) {\n        var nextSibling = curChild.nextSibling; // Just in case the DOM changes while removing\n        beforeRemove(curChild);\n        curChild = nextSibling;\n      }\n\n      referenceEl.innerHTML = \"\";\n      insertBefore(el, null, referenceEl);\n      return afterInsert(this, referenceEl);\n    },\n    insertBefore: function (referenceEl) {\n      referenceEl = resolveEl(referenceEl);\n      var el = getEl(this, referenceEl);\n      insertBefore(el, referenceEl, referenceEl.parentNode);\n      return afterInsert(this, referenceEl);\n    },\n    insertAfter: function (referenceEl) {\n      referenceEl = resolveEl(referenceEl);\n      var el = getEl(this, referenceEl);\n      insertAfter(el, referenceEl, referenceEl.parentNode);\n      return afterInsert(this, referenceEl);\n    }\n  });\n};\n"],"file":"dom-insert.js"}