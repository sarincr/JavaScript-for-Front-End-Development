{"version":3,"sources":["../../../src/runtime/vdom/vdom.js"],"names":["VNode","require","VDocumentFragment","VElement","VText","VComponent","VFragment","parseHTML","defaultDocument","document","specialHtmlRegexp","virtualizeChildNodes","node","vdomParent","ownerComponent","curChild","firstChild","virtualize","nextSibling","nodeType","nodeValue","vdomDocFragment","virtualizeHTML","html","doc","test","vdomFragment","Node_prototype","prototype","t","value","type","vdomNode","toHTML","toString","exports"],"mappings":"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","sourcesContent":["var VNode = require(\"./VNode\");\nvar VDocumentFragment = require(\"./VDocumentFragment\");\nvar VElement = require(\"./VElement\");\nvar VText = require(\"./VText\");\nvar VComponent = require(\"./VComponent\");\nvar VFragment = require(\"./VFragment\");\nvar parseHTML = require(\"./parse-html\");\n\nvar defaultDocument = typeof document != \"undefined\" && document;\nvar specialHtmlRegexp = /[&<]/;\n\nfunction virtualizeChildNodes(node, vdomParent, ownerComponent) {\n  var curChild = node.firstChild;\n  while (curChild) {\n    vdomParent.___appendChild(virtualize(curChild, ownerComponent));\n    curChild = curChild.nextSibling;\n  }\n}\n\nfunction virtualize(node, ownerComponent) {\n  switch (node.nodeType) {\n    case 1:\n      return VElement.___virtualize(node, virtualizeChildNodes, ownerComponent);\n    case 3:\n      return new VText(node.nodeValue, ownerComponent);\n    case 11:\n      var vdomDocFragment = new VDocumentFragment();\n      virtualizeChildNodes(node, vdomDocFragment, ownerComponent);\n      return vdomDocFragment;\n  }\n}\n\nfunction virtualizeHTML(html, doc, ownerComponent) {\n  if (!specialHtmlRegexp.test(html)) {\n    return new VText(html, ownerComponent);\n  }\n\n  var vdomFragment = new VDocumentFragment();\n  var curChild = parseHTML(html);\n\n  while (curChild) {\n    vdomFragment.___appendChild(virtualize(curChild, ownerComponent));\n    curChild = curChild.nextSibling;\n  }\n\n  return vdomFragment;\n}\n\nvar Node_prototype = VNode.prototype;\n\n/**\n * Shorthand method for creating and appending a Text node with a given value\n * @param  {String} value The text value for the new Text node\n */\nNode_prototype.t = function (value) {\n  var type = typeof value;\n  var vdomNode;\n\n  if (type !== \"string\") {\n    if (value == null) {\n      value = \"\";\n    } else if (type === \"object\") {\n      if (value.toHTML) {\n        vdomNode = virtualizeHTML(value.toHTML(), document);\n      }\n    }\n  }\n\n  this.___appendChild(vdomNode || new VText(value.toString()));\n  return this.___finishChild();\n};\n\nNode_prototype.___appendDocumentFragment = function () {\n  return this.___appendChild(new VDocumentFragment());\n};\n\nexports.___VDocumentFragment = VDocumentFragment;\nexports.___VElement = VElement;\nexports.___VText = VText;\nexports.___VComponent = VComponent;\nexports.___VFragment = VFragment;\nexports.___virtualize = virtualize;\nexports.___virtualizeHTML = virtualizeHTML;\nexports.___defaultDocument = defaultDocument;\n"],"file":"vdom.js"}