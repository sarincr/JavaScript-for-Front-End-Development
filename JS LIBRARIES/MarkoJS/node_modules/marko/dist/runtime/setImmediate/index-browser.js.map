{"version":3,"sources":["../../../src/runtime/setImmediate/index-browser.js"],"names":["queue","msg","Math","random","window","addEventListener","ev","data","callbacks","i","length","module","exports","callback","push","postMessage"],"mappings":"aAAA,IAAIA,KAAK,GAAG,EAAZ;AACA,IAAIC,GAAG,GAAG,KAAKC,IAAI,CAACC,MAAL,EAAf;AACAC,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,UAAUC,EAAV,EAAc;AAC/C,MAAIA,EAAE,CAACC,IAAH,KAAYN,GAAhB,EAAqB;AACnB,QAAIO,SAAS,GAAGR,KAAhB;AACAA,IAAAA,KAAK,GAAG,EAAR;AACA,SAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,SAAS,CAACE,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzCD,MAAAA,SAAS,CAACC,CAAD,CAAT;AACD;AACF;AACF,CARD;;AAUAE,MAAM,CAACC,OAAP,GAAiB,UAAUC,QAAV,EAAoB;AACnC,MAAIb,KAAK,CAACc,IAAN,CAAWD,QAAX,MAAyB,CAA7B,EAAgC;AAC9BT,IAAAA,MAAM,CAACW,WAAP,CAAmBd,GAAnB,EAAwB,GAAxB;AACD;AACF,CAJD","sourcesContent":["var queue = [];\nvar msg = \"\" + Math.random();\nwindow.addEventListener(\"message\", function (ev) {\n  if (ev.data === msg) {\n    var callbacks = queue;\n    queue = [];\n    for (var i = 0; i < callbacks.length; i++) {\n      callbacks[i]();\n    }\n  }\n});\n\nmodule.exports = function (callback) {\n  if (queue.push(callback) === 1) {\n    window.postMessage(msg, \"*\");\n  }\n};\n"],"file":"index-browser.js"}