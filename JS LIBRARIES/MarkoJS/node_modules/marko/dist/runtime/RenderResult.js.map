{"version":3,"sources":["../../src/runtime/RenderResult.js"],"names":["domInsert","require","getComponentDefs","result","componentDefs","Error","RenderResult","out","undefined","module","exports","proto","prototype","getComponent","getComponents","selector","components","forEach","componentDef","component","push","afterInsert","doc","componentsContext","getNode","getOutput","toString","document","Object","defineProperty","get","getEl","renderResult","referenceEl","ownerDocument","isShadow","ShadowRoot"],"mappings":"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","sourcesContent":["var domInsert = require(\"./dom-insert\");\nvar complain = \"MARKO_DEBUG\" && require(\"complain\");\n\nfunction getComponentDefs(result) {\n  var componentDefs = result.___components;\n\n  if (!componentDefs) {\n    throw Error(\"No component\");\n  }\n  return componentDefs;\n}\n\nfunction RenderResult(out) {\n  this.out = this.___out = out;\n  this.___components = undefined;\n}\n\nmodule.exports = RenderResult;\n\nvar proto = (RenderResult.prototype = {\n  getComponent: function () {\n    return this.getComponents()[0];\n  },\n  getComponents: function (selector) {\n    if (this.___components === undefined) {\n      throw Error(\"Not added to DOM\");\n    }\n\n    var componentDefs = getComponentDefs(this);\n\n    var components = [];\n\n    componentDefs.forEach(function (componentDef) {\n      var component = componentDef.___component;\n      if (!selector || selector(component)) {\n        components.push(component);\n      }\n    });\n\n    return components;\n  },\n\n  afterInsert: function (doc) {\n    var out = this.___out;\n    var componentsContext = out.___components;\n    if (componentsContext) {\n      this.___components = componentsContext.___initComponents(doc);\n    } else {\n      this.___components = null;\n    }\n\n    return this;\n  },\n  getNode: function (doc) {\n    return this.___out.___getNode(doc);\n  },\n  getOutput: function () {\n    return this.___out.___getOutput();\n  },\n  toString: function () {\n    return this.___out.toString();\n  },\n  document: typeof document != \"undefined\" && document\n});\n\nObject.defineProperty(proto, \"html\", {\n  get: function () {\n    // eslint-disable-next-line no-constant-condition\n    if (\"MARKO_DEBUG\") {\n      complain(\n        'The \"html\" property is deprecated. Please use \"toString\" instead.'\n      );\n    }\n    return this.toString();\n  }\n});\n\nObject.defineProperty(proto, \"context\", {\n  get: function () {\n    // eslint-disable-next-line no-constant-condition\n    if (\"MARKO_DEBUG\") {\n      complain(\n        'The \"context\" property is deprecated. Please use \"out\" instead.'\n      );\n    }\n    return this.___out;\n  }\n});\n\n// Add all of the following DOM methods to Component.prototype:\n// - appendTo(referenceEl)\n// - replace(referenceEl)\n// - replaceChildrenOf(referenceEl)\n// - insertBefore(referenceEl)\n// - insertAfter(referenceEl)\n// - prependTo(referenceEl)\ndomInsert(\n  proto,\n  function getEl(renderResult, referenceEl) {\n    return renderResult.getNode(referenceEl.ownerDocument);\n  },\n  function afterInsert(renderResult, referenceEl) {\n    var isShadow =\n      typeof ShadowRoot === \"function\" && referenceEl instanceof ShadowRoot;\n    return renderResult.afterInsert(\n      isShadow ? referenceEl : referenceEl.ownerDocument\n    );\n  }\n);\n"],"file":"RenderResult.js"}