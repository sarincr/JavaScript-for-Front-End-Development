{"version":3,"sources":["../../../src/runtime/components/Component.js"],"names":["domInsert","require","defaultCreateOut","getComponentsContext","componentsUtil","componentLookup","destroyNodeRecursive","EventEmitter","RenderResult","SubscriptionTracker","inherit","updateManager","morphdom","eventDelegation","domData","componentsByDOMNode","keyedElementsByComponentId","CONTEXT_KEY","hasOwnProperty","Object","prototype","slice","Array","COMPONENT_SUBSCRIBE_TO_OPTIONS","NON_COMPONENT_SUBSCRIBE_TO_OPTIONS","addDestroyListener","emit","ELEMENT_NODE","removeListener","removeEventListenerHandle","walkFragments","fragment","node","firstChild","handleCustomEventWithMethodListener","component","targetMethodName","args","extraArgs","push","concat","targetComponent","targetMethod","Error","apply","resolveKeyHelper","key","index","resolveComponentIdHelper","id","processUpdateHandlers","stateChanges","oldState","handlerMethod","handlers","propName","call","handlerMethodName","forEach","handler","propertyName","newValue","oldValue","checkInputChanged","existingComponent","oldInput","newInput","oldKeys","keys","newKeys","len","length","i","componentProto","Component","undefined","ssrKeyedElements","subscribeTo","target","TypeError","subscriptions","subscribeToOptions","eventType","customEvents","isOnce","arguments","getElId","getEl","keyedElement","el","getEls","els","getComponent","rootNode","get","getComponents","lookup","map","filter","Boolean","destroy","root","nodes","parentNode","removeChild","detached","set","removeAllListeners","isDestroyed","state","newState","setState","name","value","k","setStateDirty","replaceState","input","onInput","out","updatedInput","$global","forceUpdate","update","shouldUpdate","self","renderer","afterInsert","isHydrate","doc","globalData","createOut","sync","componentsContext","globalComponentsContext","result","targetNode","remove","eventListenerHandles","scope","finalCustomEvents","customEvent","nodeType","onCreate","onRender","onUpdate","onMount","onDestroy","elId","module","exports"],"mappings":"AAAA;AACA;;;;AAIA,IAAIA,SAAS,GAAGC,OAAO,CAAC,eAAD,CAAvB;AACA,IAAIC,gBAAgB,GAAGD,OAAO,CAAC,cAAD,CAA9B;AACA,IAAIE,oBAAoB;AACtBF,OAAO,CAAC,qBAAD,CAAP,GADF;AAEA,IAAIG,cAAc,GAAGH,OAAO,CAAC,QAAD,CAA5B;AACA,IAAII,eAAe,GAAGD,cAAc,GAApC;AACA,IAAIE,oBAAoB,GAAGF,cAAc,GAAzC;AACA,IAAIG,YAAY,GAAGN,OAAO,CAAC,cAAD,CAA1B;AACA,IAAIO,YAAY,GAAGP,OAAO,CAAC,iBAAD,CAA1B;AACA,IAAIQ,mBAAmB,GAAGR,OAAO,CAAC,kBAAD,CAAjC;AACA,IAAIS,OAAO,GAAGT,OAAO,CAAC,qBAAD,CAArB;AACA,IAAIU,aAAa,GAAGV,OAAO,CAAC,kBAAD,CAA3B;AACA,IAAIW,QAAQ,GAAGX,OAAO,CAAC,kBAAD,CAAtB;AACA,IAAIY,eAAe,GAAGZ,OAAO,CAAC,oBAAD,CAA7B;AACA,IAAIa,OAAO,GAAGb,OAAO,CAAC,YAAD,CAArB;AACA,IAAIc,mBAAmB,GAAGD,OAAO,GAAjC;AACA,IAAIE,0BAA0B,GAAGF,OAAO,GAAxC;AACA,IAAIG,WAAW,GAAG,qBAAlB;;AAEA,IAAIC,cAAc,GAAGC,MAAM,CAACC,SAAP,CAAiBF,cAAtC;AACA,IAAIG,KAAK,GAAGC,KAAK,CAACF,SAAN,CAAgBC,KAA5B;;AAEA,IAAIE,8BAAJ;AACA,IAAIC,kCAAkC,GAAG;AACvCC,EAAAA,kBAAkB,EAAE,KADmB,EAAzC;;;AAIA,IAAIC,IAAI,GAAGnB,YAAY,CAACa,SAAb,CAAuBM,IAAlC;AACA,IAAIC,YAAY,GAAG,CAAnB;;AAEA,SAASC,cAAT,CAAwBC,yBAAxB,EAAmD;AACjDA,EAAAA,yBAAyB;AAC1B;;AAED,SAASC,aAAT,CAAuBC,QAAvB,EAAiC;AAC/B,MAAIC,IAAJ;;AAEA,SAAOD,QAAP,EAAiB;AACfC,IAAAA,IAAI,GAAGD,QAAQ,CAACE,UAAhB;;AAEA,QAAI,CAACD,IAAL,EAAW;AACT;AACD;;AAEDD,IAAAA,QAAQ,GAAGC,IAAI,CAACD,QAAhB;AACD;;AAED,SAAOC,IAAP;AACD;;AAED,SAASE,mCAAT;AACEC,SADF;AAEEC,gBAFF;AAGEC,IAHF;AAIEC,SAJF;AAKE;AACA;AACAD,EAAAA,IAAI,CAACE,IAAL,CAAUJ,SAAV;;AAEA,MAAIG,SAAJ,EAAe;AACbD,IAAAA,IAAI,GAAGC,SAAS,CAACE,MAAV,CAAiBH,IAAjB,CAAP;AACD;;AAED,MAAII,eAAe,GAAGpC,eAAe,CAAC8B,SAAS,GAAV,CAArC;AACA,MAAIO,YAAY;AACd,SAAON,gBAAP,KAA4B,UAA5B;AACIA,EAAAA,gBADJ;AAEIK,EAAAA,eAAe,CAACL,gBAAD,CAHrB;AAIA,MAAI,CAACM,YAAL,EAAmB;AACjB,UAAMC,KAAK,CAAC,uBAAuBP,gBAAxB,CAAX;AACD;;AAEDM,EAAAA,YAAY,CAACE,KAAb,CAAmBH,eAAnB,EAAoCJ,IAApC;AACD;;AAED,SAASQ,gBAAT,CAA0BC,GAA1B,EAA+BC,KAA/B,EAAsC;AACpC,SAAOA,KAAK,GAAGD,GAAG,GAAG,GAAN,GAAYC,KAAf,GAAuBD,GAAnC;AACD;;AAED,SAASE,wBAAT,CAAkCb,SAAlC,EAA6CW,GAA7C,EAAkDC,KAAlD,EAAyD;AACvD,SAAOZ,SAAS,CAACc,EAAV,GAAe,GAAf,GAAqBJ,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAA5C;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,qBAAT,CAA+Bf,SAA/B,EAA0CgB,YAA1C,EAAwDC,QAAxD,EAAkE;AAChE,MAAIC,aAAJ;AACA,MAAIC,QAAJ;;AAEA,OAAK,IAAIC,QAAT,IAAqBJ,YAArB,EAAmC;AACjC,QAAIjC,cAAc,CAACsC,IAAf,CAAoBL,YAApB,EAAkCI,QAAlC,CAAJ,EAAiD;AAC/C,UAAIE,iBAAiB,GAAG,YAAYF,QAApC;;AAEAF,MAAAA,aAAa,GAAGlB,SAAS,CAACsB,iBAAD,CAAzB;AACA,UAAIJ,aAAJ,EAAmB;AACjB,SAACC,QAAQ,KAAKA,QAAQ,GAAG,EAAhB,CAAT,EAA8Bf,IAA9B,CAAmC,CAACgB,QAAD,EAAWF,aAAX,CAAnC;AACD,OAFD,MAEO;AACL;AACA;AACA;AACD;AACF;AACF;;AAED;AACA;AACA;AACA,MAAIC,QAAJ,EAAc;AACZ;AACA;;AAEAA,IAAAA,QAAQ,CAACI,OAAT,CAAiB,UAAUC,OAAV,EAAmB;AAClC,UAAIC,YAAY,GAAGD,OAAO,CAAC,CAAD,CAA1B;AACAN,MAAAA,aAAa,GAAGM,OAAO,CAAC,CAAD,CAAvB;;AAEA,UAAIE,QAAQ,GAAGV,YAAY,CAACS,YAAD,CAA3B;AACA,UAAIE,QAAQ,GAAGV,QAAQ,CAACQ,YAAD,CAAvB;AACAP,MAAAA,aAAa,CAACG,IAAd,CAAmBrB,SAAnB,EAA8B0B,QAA9B,EAAwCC,QAAxC;AACD,KAPD;;AASA3B,IAAAA,SAAS,GAAT;AACAA,IAAAA,SAAS,GAAT;AACD;;AAED,SAAO,IAAP;AACD;;AAED,SAAS4B,iBAAT,CAA2BC,iBAA3B,EAA8CC,QAA9C,EAAwDC,QAAxD,EAAkE;AAChE,MAAID,QAAQ,IAAIC,QAAhB,EAA0B;AACxB,QAAID,QAAQ,IAAI,IAAZ,IAAoBC,QAAQ,IAAI,IAApC,EAA0C;AACxC,aAAO,IAAP;AACD;;AAED,QAAIC,OAAO,GAAGhD,MAAM,CAACiD,IAAP,CAAYH,QAAZ,CAAd;AACA,QAAII,OAAO,GAAGlD,MAAM,CAACiD,IAAP,CAAYF,QAAZ,CAAd;AACA,QAAII,GAAG,GAAGH,OAAO,CAACI,MAAlB;AACA,QAAID,GAAG,KAAKD,OAAO,CAACE,MAApB,EAA4B;AAC1B,aAAO,IAAP;AACD;;AAED,SAAK,IAAIC,CAAC,GAAGF,GAAb,EAAkBE,CAAC,EAAnB,GAAyB;AACvB,UAAI1B,GAAG,GAAGqB,OAAO,CAACK,CAAD,CAAjB;AACA,UAAI,EAAE1B,GAAG,IAAIoB,QAAP,IAAmBD,QAAQ,CAACnB,GAAD,CAAR,KAAkBoB,QAAQ,CAACpB,GAAD,CAA/C,CAAJ,EAA2D;AACzD,eAAO,IAAP;AACD;AACF;AACF;;AAED,SAAO,KAAP;AACD;;AAED,IAAI2B,cAAJ;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,SAAT,CAAmBzB,EAAnB,EAAuB;AACrB1C,EAAAA,YAAY,CAACiD,IAAb,CAAkB,IAAlB;AACA,OAAKP,EAAL,GAAUA,EAAV;AACA,YAAgB,IAAhB;AACA,YAAmB,IAAnB;AACA,YAAwB,IAAxB;AACA,YAAkC,IAAlC;AACA,YAA4B,IAA5B,CAPqB,CAOa;AAClC,YAAuB,IAAvB;AACA,YAAgB,IAAhB;AACA,YAAsB,IAAtB;AACA,YAAgB0B,SAAhB;AACA,YAAkB,KAAlB;AACA,YAAiBA,SAAjB;AACA,YAAoB,KAApB;AACA,YAAuB,KAAvB;AACA,YAAgB,KAAhB;AACA,YAAuB,KAAvB;AACA,YAAmBA,SAAnB;;AAEA,MAAIC,gBAAgB,GAAG5D,0BAA0B,CAACiC,EAAD,CAAjD;;AAEA,MAAI2B,gBAAJ,EAAsB;AACpB,cAAwBA,gBAAxB;AACA,WAAO5D,0BAA0B,CAACiC,EAAD,CAAjC;AACD,GAHD,MAGO;AACL,cAAwB,EAAxB;AACD;AACF;;AAEDyB,SAAS,CAACtD,SAAV,GAAsBqD,cAAc,GAAG;AACrC,MAAgB,IADqB;;AAGrCI,EAAAA,WAAW,EAAE,UAAUC,MAAV,EAAkB;AAC7B,QAAI,CAACA,MAAL,EAAa;AACX,YAAMC,SAAS,EAAf;AACD;;AAED,QAAIC,aAAa;AACf;AACC,cAAwB,IAAIvE,mBAAJ,EADzB,CADF;;AAIA,QAAIwE,kBAAkB,GAAGH,MAAM,GAAN;AACrBvD,IAAAA,8BADqB;AAErBC,IAAAA,kCAFJ;;AAIA,WAAOwD,aAAa,CAACH,WAAd,CAA0BC,MAA1B,EAAkCG,kBAAlC,CAAP;AACD,GAjBoC;;AAmBrCvD,EAAAA,IAAI,EAAE,UAAUwD,SAAV,EAAqB;AACzB,QAAIC,YAAY,GAAG,OAAnB;AACA,QAAIL,MAAJ;;AAEA,QAAIK,YAAY,KAAKL,MAAM,GAAGK,YAAY,CAACD,SAAD,CAA1B,CAAhB,EAAwD;AACtD,UAAI9C,gBAAgB,GAAG0C,MAAM,CAAC,CAAD,CAA7B;AACA,UAAIM,MAAM,GAAGN,MAAM,CAAC,CAAD,CAAnB;AACA,UAAIxC,SAAS,GAAGwC,MAAM,CAAC,CAAD,CAAtB;AACA,UAAIzC,IAAI,GAAGhB,KAAK,CAACmC,IAAN,CAAW6B,SAAX,EAAsB,CAAtB,CAAX;;AAEAnD,MAAAA,mCAAmC;AACjC,UADiC;AAEjCE,MAAAA,gBAFiC;AAGjCC,MAAAA,IAHiC;AAIjCC,MAAAA,SAJiC,CAAnC;;;AAOA,UAAI8C,MAAJ,EAAY;AACV,eAAOD,YAAY,CAACD,SAAD,CAAnB;AACD;AACF;;AAED,WAAOxD,IAAI,CAACkB,KAAL,CAAW,IAAX,EAAiByC,SAAjB,CAAP;AACD,GA1CoC;AA2CrCC,EAAAA,OAAO,EAAE,UAAUxC,GAAV,EAAeC,KAAf,EAAsB;AAC7B,QAAI,CAACD,GAAL,EAAU;AACR,aAAO,KAAKG,EAAZ;AACD;AACD,WAAOD,wBAAwB,CAAC,IAAD,EAAOF,GAAP,EAAYC,KAAZ,CAA/B;AACD,GAhDoC;AAiDrCwC,EAAAA,KAAK,EAAE,UAAUzC,GAAV,EAAeC,KAAf,EAAsB;AAC3B,QAAID,GAAJ,EAAS;AACP,UAAI0C,YAAY;AACd,cAAsB,MAAM3C,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAA5C,CADF;;AAGA;;;;;;;;;;;;AAYA,aAAOyC,YAAP;AACD,KAjBD,MAiBO;AACL,aAAO,KAAKC,EAAZ;AACD;AACF,GAtEoC;AAuErCC,EAAAA,MAAM,EAAE,UAAU5C,GAAV,EAAe;AACrBA,IAAAA,GAAG,GAAGA,GAAG,GAAG,IAAZ;;AAEA,QAAI6C,GAAG,GAAG,EAAV;AACA,QAAInB,CAAC,GAAG,CAAR;AACA,QAAIiB,EAAJ;AACA,WAAQA,EAAE,GAAG,KAAKF,KAAL,CAAWzC,GAAX,EAAgB0B,CAAhB,CAAb,EAAkC;AAChCmB,MAAAA,GAAG,CAACpD,IAAJ,CAASkD,EAAT;AACAjB,MAAAA,CAAC;AACF;AACD,WAAOmB,GAAP;AACD,GAlFoC;AAmFrCC,EAAAA,YAAY,EAAE,UAAU9C,GAAV,EAAeC,KAAf,EAAsB;AAClC,QAAI8C,QAAQ,GAAG,QAAsB,MAAMhD,gBAAgB,CAACC,GAAD,EAAMC,KAAN,CAA5C,CAAf;AACA;;;;;;;;;AASA,WAAO8C,QAAQ,IAAI9E,mBAAmB,CAAC+E,GAApB,CAAwBD,QAAxB,CAAnB;AACD,GA/FoC;AAgGrCE,EAAAA,aAAa,EAAE,UAAUjD,GAAV,EAAe;AAC5B,QAAIkD,MAAM,GAAG,QAAsB,MAAMlD,GAAN,GAAY,IAAlC,CAAb;AACA,WAAOkD,MAAM;AACT7E,IAAAA,MAAM,CAACiD,IAAP,CAAY4B,MAAZ;AACGC,IAAAA,GADH,CACO,UAAUnD,GAAV,EAAe;AAClB,aAAO/B,mBAAmB,CAAC+E,GAApB,CAAwBE,MAAM,CAAClD,GAAD,CAA9B,CAAP;AACD,KAHH;AAIGoD,IAAAA,MAJH,CAIUC,OAJV,CADS;AAMT,MANJ;AAOD,GAzGoC;AA0GrCC,EAAAA,OAAO,EAAE,YAAY;AACnB,QAAI,OAAJ,EAAuB;AACrB;AACD;;AAED,QAAIC,IAAI,GAAG,OAAX;;AAEA;;AAEA,QAAIC,KAAK,GAAGD,IAAI,CAACC,KAAjB;;AAEAA,IAAAA,KAAK,CAAC5C,OAAN,CAAc,UAAU1B,IAAV,EAAgB;AAC5B1B,MAAAA,oBAAoB,CAAC0B,IAAD,CAApB;;AAEA,UAAInB,eAAe,IAAf,CAAoCmB,IAApC,MAA8C,KAAlD,EAAyD;AACvDA,QAAAA,IAAI,CAACuE,UAAL,CAAgBC,WAAhB,CAA4BxE,IAA5B;AACD;AACF,KAND;;AAQAqE,IAAAA,IAAI,CAACI,QAAL,GAAgB,IAAhB;;AAEA,WAAOpG,eAAe,CAAC,KAAK4C,EAAN,CAAtB;AACA,cAAwB,EAAxB;AACD,GAjIoC;;AAmIrC,MAAmB,YAAY;AAC7B,QAAI,OAAJ,EAAuB;AACrB;AACD;;AAED;AACA,cAAoB,IAApB;;AAEAlC,IAAAA,mBAAmB,CAAC2F,GAApB,CAAwB,OAAxB,EAA0C/B,SAA1C;;AAEA,cAAmB,IAAnB;;AAEA;AACA;;AAEA,QAAIK,aAAa,GAAG,OAApB;AACA,QAAIA,aAAJ,EAAmB;AACjBA,MAAAA,aAAa,CAAC2B,kBAAd;AACA,gBAAwB,IAAxB;AACD;AACF,GAvJoC;;AAyJrCC,EAAAA,WAAW,EAAE,YAAY;AACvB,WAAO,OAAP;AACD,GA3JoC;AA4JrC,MAAIC,KAAJ,GAAY;AACV,WAAO,OAAP;AACD,GA9JoC;AA+JrC,MAAIA,KAAJ,CAAUC,QAAV,EAAoB;AAClB,QAAID,KAAK,GAAG,OAAZ;AACA,QAAI,CAACA,KAAD,IAAU,CAACC,QAAf,EAAyB;AACvB;AACD;;AAED,QAAI,CAACD,KAAL,EAAY;AACVA,MAAAA,KAAK,GAAG,UAAgB,IAAI,QAAJ,CAAkB,IAAlB,CAAxB;AACD;;AAEDA,IAAAA,KAAK,IAAL,CAAiBC,QAAQ,IAAI,EAA7B;;AAEA,QAAID,KAAK,GAAT,EAAoB;AAClB;AACD;;AAED,QAAI,CAACC,QAAL,EAAe;AACb,gBAAgB,IAAhB;AACD;AACF,GAlLoC;AAmLrCC,EAAAA,QAAQ,EAAE,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAC/B,QAAIJ,KAAK,GAAG,OAAZ;;AAEA,QAAI,CAACA,KAAL,EAAY;AACVA,MAAAA,KAAK,GAAG,UAAgB,IAAI,QAAJ,CAAkB,IAAlB,CAAxB;AACD;AACD,QAAI,OAAOG,IAAP,IAAe,QAAnB,EAA6B;AAC3B;AACA,UAAIF,QAAQ,GAAGE,IAAf;AACA,WAAK,IAAIE,CAAT,IAAcJ,QAAd,EAAwB;AACtB,YAAI5F,cAAc,CAACsC,IAAf,CAAoBsD,QAApB,EAA8BI,CAA9B,CAAJ,EAAsC;AACpCL,UAAAA,KAAK,IAAL,CAAaK,CAAb,EAAgBJ,QAAQ,CAACI,CAAD,CAAxB,EAA6B,IAA7B,CAAkC,iBAAlC;AACD;AACF;AACF,KARD,MAQO;AACLL,MAAAA,KAAK,IAAL,CAAaG,IAAb,EAAmBC,KAAnB,EAA0B,IAA1B,CAA+B,iBAA/B;AACD;AACF,GApMoC;;AAsMrCE,EAAAA,aAAa,EAAE,UAAUH,IAAV,EAAgBC,KAAhB,EAAuB;AACpC,QAAIJ,KAAK,GAAG,OAAZ;;AAEA,QAAIxB,SAAS,CAACd,MAAV,IAAoB,CAAxB,EAA2B;AACzB0C,MAAAA,KAAK,GAAGJ,KAAK,CAACG,IAAD,CAAb;AACD;;AAEDH,IAAAA,KAAK,IAAL;AACEG,IAAAA,IADF;AAEEC,IAAAA,KAFF;AAGE,QAHF,CAGO,iBAHP;AAIE,QAJF,CAIO,qBAJP;;AAMD,GAnNoC;;AAqNrCG,EAAAA,YAAY,EAAE,UAAUN,QAAV,EAAoB;AAChC,gBAAyBA,QAAzB;AACD,GAvNoC;;AAyNrC,MAAIO,KAAJ,GAAY;AACV,WAAO,OAAP;AACD,GA3NoC;AA4NrC,MAAIA,KAAJ,CAAUnD,QAAV,EAAoB;AAClB,QAAI,OAAJ,EAA0B;AACxB,gBAAgBA,QAAhB;AACD,KAFD,MAEO;AACL,eAAiBA,QAAjB;AACD;AACF,GAlOoC;;AAoOrC,OAAa,UAAUA,QAAV,EAAoBoD,OAApB,EAA6BC,GAA7B,EAAkC;AAC7CD,IAAAA,OAAO,GAAGA,OAAO,IAAI,KAAKA,OAA1B;AACA,QAAIE,YAAJ;;AAEA,QAAIvD,QAAQ,GAAG,OAAf;AACA,cAAgBU,SAAhB;AACA,eAAmB4C,GAAG,IAAIA,GAAG,CAACtG,WAAD,CAAX,IAA6B,QAA/C;;AAEA,QAAIqG,OAAJ,EAAa;AACX;AACA;AACA,gBAAuB,IAAvB;AACAE,MAAAA,YAAY,GAAGF,OAAO,CAAC9D,IAAR,CAAa,IAAb,EAAmBU,QAAQ,IAAI,EAA/B,EAAmCqD,GAAnC,CAAf;AACA,gBAAuB,KAAvB;AACD;;AAEDrD,IAAAA,QAAQ,GAAG,UAAsBsD,YAAY,IAAItD,QAAjD;;AAEA,QAAK,UAAgBH,iBAAiB,CAAC,IAAD,EAAOE,QAAP,EAAiBC,QAAjB,CAAtC,EAAmE;AACjE;AACD;;AAED,QAAI,YAAkBS,SAAtB,EAAiC;AAC/B,gBAAgBT,QAAhB;AACA,UAAIA,QAAQ,IAAIA,QAAQ,CAACuD,OAAzB,EAAkC;AAChC,kBAAiBvD,QAAQ,CAACuD,OAA1B;AACD;AACF;;AAED,WAAOvD,QAAP;AACD,GAlQoC;;AAoQrCwD,EAAAA,WAAW,EAAE,YAAY;AACvB,cAAgB,IAAhB;AACA;AACD,GAvQoC;;AAyQrC,OAAgB,YAAY;AAC1B,QAAI,CAAC,OAAL,EAA2B;AACzB,gBAAuB,IAAvB;AACA/G,MAAAA,aAAa,IAAb,CAAsC,IAAtC;AACD;AACF,GA9QoC;;AAgRrCgH,EAAAA,MAAM,EAAE,YAAY;AAClB,QAAI,YAAsB,IAAtB,IAA8B,aAAoB,KAAtD,EAA6D;AAC3D;AACD;;AAED,QAAIN,KAAK,GAAG,OAAZ;AACA,QAAIR,KAAK,GAAG,OAAZ;;AAEA,QAAI,YAAkB,KAAlB,IAA2BA,KAAK,KAAK,IAArC,IAA6CA,KAAK,GAAL,KAAmB,IAApE,EAA0E;AACxE,UAAI3D,qBAAqB,CAAC,IAAD,EAAO2D,KAAK,IAAZ,EAAyBA,KAAK,IAA9B,EAAuCA,KAAvC,CAAzB,EAAwE;AACtEA,QAAAA,KAAK,GAAL,GAAiB,KAAjB;AACD;AACF;;AAED,QAAI,aAAoB,IAAxB,EAA8B;AAC5B;AACA;;AAEA,UAAI,KAAKe,YAAL,CAAkBP,KAAlB,EAAyBR,KAAzB,MAAoC,KAAxC,EAA+C;AAC7C;AACD;AACF;;AAED;AACD,GAxSoC;;AA0SrC,YAAiB;AACf;AACE,kBAAkB,IAAlB;AACC,kBAAkB,IAAlB,IAA0B,eAA2B,IAFxD;;AAID,GA/SoC;;AAiTrC,MAAU,YAAY;AACpB,cAAgB,KAAhB;AACA,cAAuB,KAAvB;AACA,cAAsB,IAAtB;AACA,QAAIA,KAAK,GAAG,OAAZ;AACA,QAAIA,KAAJ,EAAW;AACTA,MAAAA,KAAK,GAAL;AACD;AACF,GAzToC;;AA2TrCe,EAAAA,YAAY,EAAE,YAAY;AACxB,WAAO,IAAP;AACD,GA7ToC;;AA+TrC,OAAqB,YAAY;AAC/B,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIC,QAAQ,GAAGD,IAAI,IAAnB;;AAEA,QAAI,CAACC,QAAL,EAAe;AACb,YAAM/C,SAAS,EAAf;AACD;;AAED,QAAIsC,KAAK,GAAG,WAAuB,OAAnC;;AAEA1G,IAAAA,aAAa,IAAb,CAA6B,YAAY;AACvCkH,MAAAA,IAAI,IAAJ,CAAiBR,KAAjB,EAAwB,KAAxB,EAA+BU,WAA/B,CAA2CF,IAAI,GAA/C;AACD,KAFD;;AAIA;AACD,GA9UoC;;AAgVrC,OAAa,UAAUR,KAAV,EAAiBW,SAAjB,EAA4B;AACvC,QAAIC,GAAG,GAAG,OAAV;AACA,QAAIC,UAAU,GAAG,OAAjB;AACA,QAAIrC,QAAQ,GAAG,OAAf;AACA,QAAIiC,QAAQ,GAAG,QAAf;AACA,QAAIK,SAAS,GAAGL,QAAQ,CAACK,SAAT,IAAsBjI,gBAAtC;AACA,QAAIqH,GAAG,GAAGY,SAAS,CAACD,UAAD,CAAnB;AACAX,IAAAA,GAAG,CAACa,IAAJ;AACAb,IAAAA,GAAG,GAAH,GAAkB,OAAlB;AACAA,IAAAA,GAAG,CAACtG,WAAD,CAAH,GAAmB,QAAnB;;AAEA,QAAIoH,iBAAiB,GAAGlI,oBAAoB,CAACoH,GAAD,CAA5C;AACA,QAAIe,uBAAuB,GAAGD,iBAAiB,GAA/C;AACAC,IAAAA,uBAAuB,IAAvB,GAA+C,IAA/C;AACAA,IAAAA,uBAAuB,GAAvB,GAAuCN,SAAvC;;AAEAF,IAAAA,QAAQ,CAACT,KAAD,EAAQE,GAAR,CAAR;;AAEA,QAAIgB,MAAM,GAAG,IAAI/H,YAAJ,CAAiB+G,GAAjB,CAAb;;AAEA,QAAIiB,UAAU,GAAGjB,GAAG,GAAH,MAAjB;;AAEA3G,IAAAA,QAAQ,CAACiF,QAAD,EAAW2C,UAAX,EAAuBP,GAAvB,EAA4BI,iBAA5B,CAAR;;AAEA,WAAOE,MAAP;AACD,GAzWoC;;AA2WrC,OAAW,YAAY;AACrB,QAAIlC,IAAI,GAAG,OAAX;AACAA,IAAAA,IAAI,CAACoC,MAAL;AACA,WAAOpC,IAAP;AACD,GA/WoC;;AAiXrC,OAA4B,YAAY;AACtC,QAAIqC,oBAAoB,GAAG,OAA3B;AACA,QAAIA,oBAAJ,EAA0B;AACxBA,MAAAA,oBAAoB,CAAChF,OAArB,CAA6B9B,cAA7B;AACA,gBAAkC,IAAlC;AACD;AACF,GAvXoC;;AAyXrC,YAAkB;AAChB,QAAIiF,KAAK,GAAG,OAAZ;AACA,WAAOA,KAAK,IAAIA,KAAK,IAArB;AACD,GA5XoC;;AA8XrC,OAAoB,UAAU1B,YAAV,EAAwBwD,KAAxB,EAA+B;AACjD,QAAIC,iBAAiB,GAAI,UAAuB,EAAhD;AACA,cAAgBD,KAAhB;;AAEAxD,IAAAA,YAAY,CAACzB,OAAb,CAAqB,UAAUmF,WAAV,EAAuB;AAC1C,UAAI3D,SAAS,GAAG2D,WAAW,CAAC,CAAD,CAA3B;AACA,UAAIzG,gBAAgB,GAAGyG,WAAW,CAAC,CAAD,CAAlC;AACA,UAAIzD,MAAM,GAAGyD,WAAW,CAAC,CAAD,CAAxB;AACA,UAAIvG,SAAS,GAAGuG,WAAW,CAAC,CAAD,CAA3B;;AAEA,UAAIzG,gBAAJ,EAAsB;AACpBwG,QAAAA,iBAAiB,CAAC1D,SAAD,CAAjB,GAA+B,CAAC9C,gBAAD,EAAmBgD,MAAnB,EAA2B9C,SAA3B,CAA/B;AACD;AACF,KATD;AAUD,GA5YoC;;AA8YrC,MAAImD,EAAJ,GAAS;AACP,WAAO3D,aAAa,CAAC,OAAD,CAApB;AACD,GAhZoC;;AAkZrC,MAAI6D,GAAJ,GAAU;AACR;;;;;;AAMA,WAAO,CAAC,UAAmB,QAAiBW,KAApC,GAA4C,EAA7C,EAAiDJ,MAAjD,CAAwD;AAC7DT,IAAAA,EAD6D;AAE7D;AACA,aAAOA,EAAE,CAACqD,QAAH,KAAgBnH,YAAvB;AACD,KAJM,CAAP;AAKD,GA9ZoC;;AAgarC,OAASD,IAha4B;AAiarC,MAAc2F,KAAd,EAAqBE,GAArB,EAA0B;AACxB,SAAKwB,QAAL,IAAiB,KAAKA,QAAL,CAAc1B,KAAd,EAAqBE,GAArB,CAAjB;AACA,aAAa,QAAb,EAAuBF,KAAvB,EAA8BE,GAA9B;AACD,GApaoC;;AAsarC,MAAcA,GAAd,EAAmB;AACjB,SAAKyB,QAAL,IAAiB,KAAKA,QAAL,CAAczB,GAAd,CAAjB;AACA,aAAa,QAAb,EAAuBA,GAAvB;AACD,GAzaoC;;AA2arC,OAAgB;AACd,SAAK0B,QAAL,IAAiB,KAAKA,QAAL,EAAjB;AACA,aAAa,QAAb;AACD,GA9aoC;;AAgbrC,QAAe;AACb,SAAKC,OAAL,IAAgB,KAAKA,OAAL,EAAhB;AACA,aAAa,OAAb;AACD,GAnboC;;AAqbrC,QAAiB;AACf,SAAKC,SAAL,IAAkB,KAAKA,SAAL,EAAlB;AACA,aAAa,SAAb;AACD,GAxboC,EAAvC;;;AA2bA1E,cAAc,CAAC2E,IAAf,GAAsB3E,cAAc,CAACa,OAArC;AACAb,cAAc,IAAd,GAA2BA,cAAc,CAACkD,MAA1C;AACAlD,cAAc,IAAd,GAA4BA,cAAc,CAAC2B,OAA3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACApG,SAAS;AACPyE,cADO;AAEP,SAASc,KAAT,CAAepD,SAAf,EAA0B;AACxB,SAAOA,SAAS,IAAT,EAAP;AACD,CAJM;AAKP,SAAS4F,WAAT,CAAqB5F,SAArB,EAAgC;AAC9B,SAAOA,SAAP;AACD,CAPM,CAAT;;;AAUAzB,OAAO,CAACgE,SAAD,EAAYnE,YAAZ,CAAP;;AAEA8I,MAAM,CAACC,OAAP,GAAiB5E,SAAjB","sourcesContent":["\"use strict\";\n/* jshint newcap:false */\n\nvar complain = \"MARKO_DEBUG\" && require(\"complain\");\n\nvar domInsert = require(\"../dom-insert\");\nvar defaultCreateOut = require(\"../createOut\");\nvar getComponentsContext =\n  require(\"./ComponentsContext\").___getComponentsContext;\nvar componentsUtil = require(\"./util\");\nvar componentLookup = componentsUtil.___componentLookup;\nvar destroyNodeRecursive = componentsUtil.___destroyNodeRecursive;\nvar EventEmitter = require(\"events-light\");\nvar RenderResult = require(\"../RenderResult\");\nvar SubscriptionTracker = require(\"listener-tracker\");\nvar inherit = require(\"raptor-util/inherit\");\nvar updateManager = require(\"./update-manager\");\nvar morphdom = require(\"../vdom/morphdom\");\nvar eventDelegation = require(\"./event-delegation\");\nvar domData = require(\"./dom-data\");\nvar componentsByDOMNode = domData.___componentByDOMNode;\nvar keyedElementsByComponentId = domData.___ssrKeyedElementsByComponentId;\nvar CONTEXT_KEY = \"__subtree_context__\";\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar slice = Array.prototype.slice;\n\nvar COMPONENT_SUBSCRIBE_TO_OPTIONS;\nvar NON_COMPONENT_SUBSCRIBE_TO_OPTIONS = {\n  addDestroyListener: false\n};\n\nvar emit = EventEmitter.prototype.emit;\nvar ELEMENT_NODE = 1;\n\nfunction removeListener(removeEventListenerHandle) {\n  removeEventListenerHandle();\n}\n\nfunction walkFragments(fragment) {\n  var node;\n\n  while (fragment) {\n    node = fragment.firstChild;\n\n    if (!node) {\n      break;\n    }\n\n    fragment = node.fragment;\n  }\n\n  return node;\n}\n\nfunction handleCustomEventWithMethodListener(\n  component,\n  targetMethodName,\n  args,\n  extraArgs\n) {\n  // Remove the \"eventType\" argument\n  args.push(component);\n\n  if (extraArgs) {\n    args = extraArgs.concat(args);\n  }\n\n  var targetComponent = componentLookup[component.___scope];\n  var targetMethod =\n    typeof targetMethodName === \"function\"\n      ? targetMethodName\n      : targetComponent[targetMethodName];\n  if (!targetMethod) {\n    throw Error(\"Method not found: \" + targetMethodName);\n  }\n\n  targetMethod.apply(targetComponent, args);\n}\n\nfunction resolveKeyHelper(key, index) {\n  return index ? key + \"_\" + index : key;\n}\n\nfunction resolveComponentIdHelper(component, key, index) {\n  return component.id + \"-\" + resolveKeyHelper(key, index);\n}\n\n/**\n * This method is used to process \"update_<stateName>\" handler functions.\n * If all of the modified state properties have a user provided update handler\n * then a rerender will be bypassed and, instead, the DOM will be updated\n * looping over and invoking the custom update handlers.\n * @return {boolean} Returns true if if the DOM was updated. False, otherwise.\n */\nfunction processUpdateHandlers(component, stateChanges, oldState) {\n  var handlerMethod;\n  var handlers;\n\n  for (var propName in stateChanges) {\n    if (hasOwnProperty.call(stateChanges, propName)) {\n      var handlerMethodName = \"update_\" + propName;\n\n      handlerMethod = component[handlerMethodName];\n      if (handlerMethod) {\n        (handlers || (handlers = [])).push([propName, handlerMethod]);\n      } else {\n        // This state change does not have a state handler so return false\n        // to force a rerender\n        return;\n      }\n    }\n  }\n\n  // If we got here then all of the changed state properties have\n  // an update handler or there are no state properties that actually\n  // changed.\n  if (handlers) {\n    // Otherwise, there are handlers for all of the changed properties\n    // so apply the updates using those handlers\n\n    handlers.forEach(function (handler) {\n      var propertyName = handler[0];\n      handlerMethod = handler[1];\n\n      var newValue = stateChanges[propertyName];\n      var oldValue = oldState[propertyName];\n      handlerMethod.call(component, newValue, oldValue);\n    });\n\n    component.___emitUpdate();\n    component.___reset();\n  }\n\n  return true;\n}\n\nfunction checkInputChanged(existingComponent, oldInput, newInput) {\n  if (oldInput != newInput) {\n    if (oldInput == null || newInput == null) {\n      return true;\n    }\n\n    var oldKeys = Object.keys(oldInput);\n    var newKeys = Object.keys(newInput);\n    var len = oldKeys.length;\n    if (len !== newKeys.length) {\n      return true;\n    }\n\n    for (var i = len; i--; ) {\n      var key = oldKeys[i];\n      if (!(key in newInput && oldInput[key] === newInput[key])) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nvar componentProto;\n\n/**\n * Base component type.\n *\n * NOTE: Any methods that are prefixed with an underscore should be considered private!\n */\nfunction Component(id) {\n  EventEmitter.call(this);\n  this.id = id;\n  this.___state = null;\n  this.___rootNode = null;\n  this.___subscriptions = null;\n  this.___domEventListenerHandles = null;\n  this.___bubblingDomEvents = null; // Used to keep track of bubbling DOM events for components rendered on the server\n  this.___customEvents = null;\n  this.___scope = null;\n  this.___renderInput = null;\n  this.___input = undefined;\n  this.___mounted = false;\n  this.___global = undefined;\n  this.___destroyed = false;\n  this.___updateQueued = false;\n  this.___dirty = false;\n  this.___settingInput = false;\n  this.___document = undefined;\n\n  var ssrKeyedElements = keyedElementsByComponentId[id];\n\n  if (ssrKeyedElements) {\n    this.___keyedElements = ssrKeyedElements;\n    delete keyedElementsByComponentId[id];\n  } else {\n    this.___keyedElements = {};\n  }\n}\n\nComponent.prototype = componentProto = {\n  ___isComponent: true,\n\n  subscribeTo: function (target) {\n    if (!target) {\n      throw TypeError();\n    }\n\n    var subscriptions =\n      this.___subscriptions ||\n      (this.___subscriptions = new SubscriptionTracker());\n\n    var subscribeToOptions = target.___isComponent\n      ? COMPONENT_SUBSCRIBE_TO_OPTIONS\n      : NON_COMPONENT_SUBSCRIBE_TO_OPTIONS;\n\n    return subscriptions.subscribeTo(target, subscribeToOptions);\n  },\n\n  emit: function (eventType) {\n    var customEvents = this.___customEvents;\n    var target;\n\n    if (customEvents && (target = customEvents[eventType])) {\n      var targetMethodName = target[0];\n      var isOnce = target[1];\n      var extraArgs = target[2];\n      var args = slice.call(arguments, 1);\n\n      handleCustomEventWithMethodListener(\n        this,\n        targetMethodName,\n        args,\n        extraArgs\n      );\n\n      if (isOnce) {\n        delete customEvents[eventType];\n      }\n    }\n\n    return emit.apply(this, arguments);\n  },\n  getElId: function (key, index) {\n    if (!key) {\n      return this.id;\n    }\n    return resolveComponentIdHelper(this, key, index);\n  },\n  getEl: function (key, index) {\n    if (key) {\n      var keyedElement =\n        this.___keyedElements[\"@\" + resolveKeyHelper(key, index)];\n\n      // eslint-disable-next-line no-constant-condition\n      if (\"MARKO_DEBUG\") {\n        if (\n          keyedElement &&\n          keyedElement.nodeType !== 1 /* Node.ELEMENT_NODE */\n        ) {\n          throw new Error(\n            \"Using 'getEl(key)' to get a component instance is not supported, did you mean 'getComponent(key)'?\"\n          );\n        }\n      }\n\n      return keyedElement;\n    } else {\n      return this.el;\n    }\n  },\n  getEls: function (key) {\n    key = key + \"[]\";\n\n    var els = [];\n    var i = 0;\n    var el;\n    while ((el = this.getEl(key, i))) {\n      els.push(el);\n      i++;\n    }\n    return els;\n  },\n  getComponent: function (key, index) {\n    var rootNode = this.___keyedElements[\"@\" + resolveKeyHelper(key, index)];\n    // eslint-disable-next-line no-constant-condition\n    if (\"MARKO_DEBUG\") {\n      if (/\\[\\]$/.test(key)) {\n        throw new Error(\n          \"A repeated key[] was passed to getComponent. Use a non-repeating key if there is only one of these components.\"\n        );\n      }\n    }\n\n    return rootNode && componentsByDOMNode.get(rootNode);\n  },\n  getComponents: function (key) {\n    var lookup = this.___keyedElements[\"@\" + key + \"[]\"];\n    return lookup\n      ? Object.keys(lookup)\n          .map(function (key) {\n            return componentsByDOMNode.get(lookup[key]);\n          })\n          .filter(Boolean)\n      : [];\n  },\n  destroy: function () {\n    if (this.___destroyed) {\n      return;\n    }\n\n    var root = this.___rootNode;\n\n    this.___destroyShallow();\n\n    var nodes = root.nodes;\n\n    nodes.forEach(function (node) {\n      destroyNodeRecursive(node);\n\n      if (eventDelegation.___handleNodeDetach(node) !== false) {\n        node.parentNode.removeChild(node);\n      }\n    });\n\n    root.detached = true;\n\n    delete componentLookup[this.id];\n    this.___keyedElements = {};\n  },\n\n  ___destroyShallow: function () {\n    if (this.___destroyed) {\n      return;\n    }\n\n    this.___emitDestroy();\n    this.___destroyed = true;\n\n    componentsByDOMNode.set(this.___rootNode, undefined);\n\n    this.___rootNode = null;\n\n    // Unsubscribe from all DOM events\n    this.___removeDOMEventListeners();\n\n    var subscriptions = this.___subscriptions;\n    if (subscriptions) {\n      subscriptions.removeAllListeners();\n      this.___subscriptions = null;\n    }\n  },\n\n  isDestroyed: function () {\n    return this.___destroyed;\n  },\n  get state() {\n    return this.___state;\n  },\n  set state(newState) {\n    var state = this.___state;\n    if (!state && !newState) {\n      return;\n    }\n\n    if (!state) {\n      state = this.___state = new this.___State(this);\n    }\n\n    state.___replace(newState || {});\n\n    if (state.___dirty) {\n      this.___queueUpdate();\n    }\n\n    if (!newState) {\n      this.___state = null;\n    }\n  },\n  setState: function (name, value) {\n    var state = this.___state;\n\n    if (!state) {\n      state = this.___state = new this.___State(this);\n    }\n    if (typeof name == \"object\") {\n      // Merge in the new state with the old state\n      var newState = name;\n      for (var k in newState) {\n        if (hasOwnProperty.call(newState, k)) {\n          state.___set(k, newState[k], true /* ensure:true */);\n        }\n      }\n    } else {\n      state.___set(name, value, true /* ensure:true */);\n    }\n  },\n\n  setStateDirty: function (name, value) {\n    var state = this.___state;\n\n    if (arguments.length == 1) {\n      value = state[name];\n    }\n\n    state.___set(\n      name,\n      value,\n      true /* ensure:true */,\n      true /* forceDirty:true */\n    );\n  },\n\n  replaceState: function (newState) {\n    this.___state.___replace(newState);\n  },\n\n  get input() {\n    return this.___input;\n  },\n  set input(newInput) {\n    if (this.___settingInput) {\n      this.___input = newInput;\n    } else {\n      this.___setInput(newInput);\n    }\n  },\n\n  ___setInput: function (newInput, onInput, out) {\n    onInput = onInput || this.onInput;\n    var updatedInput;\n\n    var oldInput = this.___input;\n    this.___input = undefined;\n    this.___context = (out && out[CONTEXT_KEY]) || this.___context;\n\n    if (onInput) {\n      // We need to set a flag to preview `this.input = foo` inside\n      // onInput causing infinite recursion\n      this.___settingInput = true;\n      updatedInput = onInput.call(this, newInput || {}, out);\n      this.___settingInput = false;\n    }\n\n    newInput = this.___renderInput = updatedInput || newInput;\n\n    if ((this.___dirty = checkInputChanged(this, oldInput, newInput))) {\n      this.___queueUpdate();\n    }\n\n    if (this.___input === undefined) {\n      this.___input = newInput;\n      if (newInput && newInput.$global) {\n        this.___global = newInput.$global;\n      }\n    }\n\n    return newInput;\n  },\n\n  forceUpdate: function () {\n    this.___dirty = true;\n    this.___queueUpdate();\n  },\n\n  ___queueUpdate: function () {\n    if (!this.___updateQueued) {\n      this.___updateQueued = true;\n      updateManager.___queueComponentUpdate(this);\n    }\n  },\n\n  update: function () {\n    if (this.___destroyed === true || this.___isDirty === false) {\n      return;\n    }\n\n    var input = this.___input;\n    var state = this.___state;\n\n    if (this.___dirty === false && state !== null && state.___dirty === true) {\n      if (processUpdateHandlers(this, state.___changes, state.___old, state)) {\n        state.___dirty = false;\n      }\n    }\n\n    if (this.___isDirty === true) {\n      // The UI component is still dirty after process state handlers\n      // then we should rerender\n\n      if (this.shouldUpdate(input, state) !== false) {\n        this.___scheduleRerender();\n      }\n    }\n\n    this.___reset();\n  },\n\n  get ___isDirty() {\n    return (\n      this.___dirty === true ||\n      (this.___state !== null && this.___state.___dirty === true)\n    );\n  },\n\n  ___reset: function () {\n    this.___dirty = false;\n    this.___updateQueued = false;\n    this.___renderInput = null;\n    var state = this.___state;\n    if (state) {\n      state.___reset();\n    }\n  },\n\n  shouldUpdate: function () {\n    return true;\n  },\n\n  ___scheduleRerender: function () {\n    var self = this;\n    var renderer = self.___renderer;\n\n    if (!renderer) {\n      throw TypeError();\n    }\n\n    var input = this.___renderInput || this.___input;\n\n    updateManager.___batchUpdate(function () {\n      self.___rerender(input, false).afterInsert(self.___document);\n    });\n\n    this.___reset();\n  },\n\n  ___rerender: function (input, isHydrate) {\n    var doc = this.___document;\n    var globalData = this.___global;\n    var rootNode = this.___rootNode;\n    var renderer = this.___renderer;\n    var createOut = renderer.createOut || defaultCreateOut;\n    var out = createOut(globalData);\n    out.sync();\n    out.___document = this.___document;\n    out[CONTEXT_KEY] = this.___context;\n\n    var componentsContext = getComponentsContext(out);\n    var globalComponentsContext = componentsContext.___globalContext;\n    globalComponentsContext.___rerenderComponent = this;\n    globalComponentsContext.___isHydrate = isHydrate;\n\n    renderer(input, out);\n\n    var result = new RenderResult(out);\n\n    var targetNode = out.___getOutput().___firstChild;\n\n    morphdom(rootNode, targetNode, doc, componentsContext);\n\n    return result;\n  },\n\n  ___detach: function () {\n    var root = this.___rootNode;\n    root.remove();\n    return root;\n  },\n\n  ___removeDOMEventListeners: function () {\n    var eventListenerHandles = this.___domEventListenerHandles;\n    if (eventListenerHandles) {\n      eventListenerHandles.forEach(removeListener);\n      this.___domEventListenerHandles = null;\n    }\n  },\n\n  get ___rawState() {\n    var state = this.___state;\n    return state && state.___raw;\n  },\n\n  ___setCustomEvents: function (customEvents, scope) {\n    var finalCustomEvents = (this.___customEvents = {});\n    this.___scope = scope;\n\n    customEvents.forEach(function (customEvent) {\n      var eventType = customEvent[0];\n      var targetMethodName = customEvent[1];\n      var isOnce = customEvent[2];\n      var extraArgs = customEvent[3];\n\n      if (targetMethodName) {\n        finalCustomEvents[eventType] = [targetMethodName, isOnce, extraArgs];\n      }\n    });\n  },\n\n  get el() {\n    return walkFragments(this.___rootNode);\n  },\n\n  get els() {\n    // eslint-disable-next-line no-constant-condition\n    if (\"MARKO_DEBUG\") {\n      complain(\n        'The \"this.els\" attribute is deprecated. Please use \"this.getEls(key)\" instead.'\n      );\n    }\n    return (this.___rootNode ? this.___rootNode.nodes : []).filter(function (\n      el\n    ) {\n      return el.nodeType === ELEMENT_NODE;\n    });\n  },\n\n  ___emit: emit,\n  ___emitCreate(input, out) {\n    this.onCreate && this.onCreate(input, out);\n    this.___emit(\"create\", input, out);\n  },\n\n  ___emitRender(out) {\n    this.onRender && this.onRender(out);\n    this.___emit(\"render\", out);\n  },\n\n  ___emitUpdate() {\n    this.onUpdate && this.onUpdate();\n    this.___emit(\"update\");\n  },\n\n  ___emitMount() {\n    this.onMount && this.onMount();\n    this.___emit(\"mount\");\n  },\n\n  ___emitDestroy() {\n    this.onDestroy && this.onDestroy();\n    this.___emit(\"destroy\");\n  }\n};\n\ncomponentProto.elId = componentProto.getElId;\ncomponentProto.___update = componentProto.update;\ncomponentProto.___destroy = componentProto.destroy;\n\n// Add all of the following DOM methods to Component.prototype:\n// - appendTo(referenceEl)\n// - replace(referenceEl)\n// - replaceChildrenOf(referenceEl)\n// - insertBefore(referenceEl)\n// - insertAfter(referenceEl)\n// - prependTo(referenceEl)\ndomInsert(\n  componentProto,\n  function getEl(component) {\n    return component.___detach();\n  },\n  function afterInsert(component) {\n    return component;\n  }\n);\n\ninherit(Component, EventEmitter);\n\nmodule.exports = Component;\n"],"file":"Component.js"}