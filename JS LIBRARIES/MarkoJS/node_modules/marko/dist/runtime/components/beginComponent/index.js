"use strict";

const ComponentDef = require("../ComponentDef");

var FLAG_WILL_RERENDER_IN_BROWSER = 1;
// var FLAG_HAS_RENDER_BODY = 2;

module.exports = function beginComponent(
componentsContext,
component,
key,
ownerComponentDef,
isSplitComponent,
isImplicitComponent)
{
  var componentId = component.id;

  var componentDef = componentsContext.j_ = new ComponentDef(
  component,
  componentId,
  componentsContext);


  var ownerIsRenderBoundary =
  ownerComponentDef && ownerComponentDef._H_;
  var ownerWillRerender =
  ownerComponentDef &&
  ownerComponentDef._I_ & FLAG_WILL_RERENDER_IN_BROWSER;
  // On the server
  if (!componentsContext.p_ && ownerWillRerender) {
    componentDef._I_ |= FLAG_WILL_RERENDER_IN_BROWSER;
    return componentDef;
  }

  if (isImplicitComponent === true) {
    // We don't mount implicit components rendered on the server
    // unless the implicit component is nested within a UI component
    // that will re-render in the browser
    return componentDef;
  }

  componentsContext.b_.push(componentDef);

  let out = componentsContext.y_;
  let runtimeId = out.global.runtimeId;

  componentDef._H_ = true;
  componentDef.ac_ = componentsContext.p_;

  if (isSplitComponent === false && out.global.noBrowserRerender !== true) {
    componentDef._I_ |= FLAG_WILL_RERENDER_IN_BROWSER;
    componentsContext.p_ = false;
  }

  if ((ownerIsRenderBoundary || ownerWillRerender) && key != null) {
    out.w(
    "<!--" +
    runtimeId +
    "^" +
    componentId +
    " " +
    ownerComponentDef.id +
    " " +
    key +
    "-->");

  } else {
    out.w("<!--" + runtimeId + "#" + componentId + "-->");
  }

  return componentDef;
};
//# sourceMappingURL=index.js.map